{"ast":null,"code":"export var defaultServer = \"https://localhost:2000\";\nexport function createBasicAuthHeader(username, password) {\n  const credentials = `${username}:${password}`;\n  const encoded = btoa(credentials);\n  return `Basic ${encoded}`;\n}\nexport async function getDefaultServer() {\n  try {\n    const response = await fetch(\"/api-port\", {\n      method: \"GET\"\n    });\n    if (response.status === 200) {\n      var url = new URL(window.location.href);\n      url.port = response.json()[\"port\"];\n      return \"blah\";\n      return url.protocol + \"//\" + url.host;\n    } else {\n      return \"<error>\";\n    }\n  } catch (err) {\n    return false;\n  }\n  ;\n}\nexport async function loggedIn() {\n  var server = localStorage.getItem(\"server\");\n  var token = localStorage.getItem(\"authToken\");\n  if (!token) {\n    return false;\n  }\n  try {\n    const response = await fetch(server + \"/1/run\", {\n      method: \"GET\",\n      headers: {\n        \"Authorization\": \"Bearer \" + token\n      }\n    });\n    if (response.status === 200) {\n      return true;\n    } else {\n      return false;\n    }\n  } catch (err) {\n    return false;\n  }\n  ;\n}\nexport function loggedInServer() {\n  return localStorage.getItem(\"server\");\n}\nexport function logOut() {\n  localStorage.removeItem(\"server\");\n  localStorage.removeItem(\"authToken\");\n}","map":{"version":3,"names":["defaultServer","createBasicAuthHeader","username","password","credentials","encoded","btoa","getDefaultServer","response","fetch","method","status","url","URL","window","location","href","port","json","protocol","host","err","loggedIn","server","localStorage","getItem","token","headers","loggedInServer","logOut","removeItem"],"sources":["/home/andrew/argo-dns/ui/react-app/src/Util.js"],"sourcesContent":["export var defaultServer = \"https://localhost:2000\";\n\nexport function createBasicAuthHeader(username, password) {\n    const credentials = `${username}:${password}`;\n    const encoded = btoa(credentials);\n    return `Basic ${encoded}`;\n}\n\nexport async function getDefaultServer() {\n    try {\n        const response = await fetch(\"/api-port\", {\n            method: \"GET\"\n        });\n\n        if (response.status === 200) {\n            var url = new URL(window.location.href)\n            url.port = response.json()[\"port\"]\n            return \"blah\";\n            return url.protocol + \"//\" + url.host;\n        } else {\n            return \"<error>\";\n        }\n    }\n    catch (err) {\n        return false\n    };\n}\n\nexport async function loggedIn() {\n    var server = localStorage.getItem(\"server\");\n    var token = localStorage.getItem(\"authToken\");\n    if (!token) {\n        return false;\n    }\n    try {\n        const response = await fetch(server + \"/1/run\", {\n            method: \"GET\",\n            headers: { \"Authorization\": \"Bearer \" + token }\n        });\n\n        if (response.status === 200) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n    catch (err) {\n        return false\n    };\n}\n\nexport function loggedInServer() {\n    return localStorage.getItem(\"server\");\n}\n\nexport function logOut() {\n    localStorage.removeItem(\"server\");\n    localStorage.removeItem(\"authToken\");\n}\n"],"mappings":"AAAA,OAAO,IAAIA,aAAa,GAAG,wBAAwB;AAEnD,OAAO,SAASC,qBAAqBA,CAACC,QAAQ,EAAEC,QAAQ,EAAE;EACtD,MAAMC,WAAW,GAAG,GAAGF,QAAQ,IAAIC,QAAQ,EAAE;EAC7C,MAAME,OAAO,GAAGC,IAAI,CAACF,WAAW,CAAC;EACjC,OAAO,SAASC,OAAO,EAAE;AAC7B;AAEA,OAAO,eAAeE,gBAAgBA,CAAA,EAAG;EACrC,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,WAAW,EAAE;MACtCC,MAAM,EAAE;IACZ,CAAC,CAAC;IAEF,IAAIF,QAAQ,CAACG,MAAM,KAAK,GAAG,EAAE;MACzB,IAAIC,GAAG,GAAG,IAAIC,GAAG,CAACC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAC;MACvCJ,GAAG,CAACK,IAAI,GAAGT,QAAQ,CAACU,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC;MAClC,OAAO,MAAM;MACb,OAAON,GAAG,CAACO,QAAQ,GAAG,IAAI,GAAGP,GAAG,CAACQ,IAAI;IACzC,CAAC,MAAM;MACH,OAAO,SAAS;IACpB;EACJ,CAAC,CACD,OAAOC,GAAG,EAAE;IACR,OAAO,KAAK;EAChB;EAAC;AACL;AAEA,OAAO,eAAeC,QAAQA,CAAA,EAAG;EAC7B,IAAIC,MAAM,GAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC;EAC3C,IAAIC,KAAK,GAAGF,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;EAC7C,IAAI,CAACC,KAAK,EAAE;IACR,OAAO,KAAK;EAChB;EACA,IAAI;IACA,MAAMlB,QAAQ,GAAG,MAAMC,KAAK,CAACc,MAAM,GAAG,QAAQ,EAAE;MAC5Cb,MAAM,EAAE,KAAK;MACbiB,OAAO,EAAE;QAAE,eAAe,EAAE,SAAS,GAAGD;MAAM;IAClD,CAAC,CAAC;IAEF,IAAIlB,QAAQ,CAACG,MAAM,KAAK,GAAG,EAAE;MACzB,OAAO,IAAI;IACf,CAAC,MAAM;MACH,OAAO,KAAK;IAChB;EACJ,CAAC,CACD,OAAOU,GAAG,EAAE;IACR,OAAO,KAAK;EAChB;EAAC;AACL;AAEA,OAAO,SAASO,cAAcA,CAAA,EAAG;EAC7B,OAAOJ,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC;AACzC;AAEA,OAAO,SAASI,MAAMA,CAAA,EAAG;EACrBL,YAAY,CAACM,UAAU,CAAC,QAAQ,CAAC;EACjCN,YAAY,CAACM,UAAU,CAAC,WAAW,CAAC;AACxC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}